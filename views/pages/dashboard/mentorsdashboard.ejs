<!-- component -->
<div class="overflow-x-auto">
  <div class="grid grid-cols-3 gap-2 ...">
    <div></div>
    <div class="place-self-center m-3 w-55">
      <label class="block text-center">
        <span class="text-gray-700 font-medium">Domain</span>
        <select
          class="
            form-select
            mt-3
            relative
            w-full
            block
            bg-white
            border border-gray-300
            rounded-md
            shadow-sm
            pl-3
            pr-10
            py-2
            text-left
            cursor-default
            focus:outline-none
            focus:ring-1
            focus:ring-indigo-500
            focus:border-indigo-500
            sm:text-sm
          "
          onchange="redirectURL(this.value)"
          required
        >
          <option class="option-values"  <% if(selectedDomain == null){ %> selected <% } %>  disabled>
            Select a domain
          </option>
          <% for( domain of domains){ %>
              <option class="option-values" <% if(selectedDomain == domain._id){ %> selected <% } %> value="<%= domain._id %>">
            <%= domain.name %>
          </option>
          <% } %>
        </select>
      </label>
    </div>
    <div></div>
  </div>

  <div
    class="
      min-w-screen min-h-screen
      text-center
      flex
      items-center
      justify-center
      font-sans
    "
  >
    <div class="w-full">
      <div class="bg-white h-screen rounded my-6 overflow-auto">
        <table class="min-w-max w-full table-auto">
          <thead>
            <tr
              class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"
            >
              <th class="py-3 px-6 text-left">REGISTRATION ID</th>
              <th class="py-3 px-6 text-left">SUBMISSION-LINK</th>
              <th class="py-3 px-6 text-center">WEEK</th>
              <th class="py-3 px-6 text-center">STATUS</th>
              <th class="py-3 px-6 text-center">ACTIONS</th>
            </tr>
          </thead>
          <tbody class="text-gray-600 bg-white text-sm font-light">
            <% for(user of userData) {%>
            <tr class="border-b border-gray-200 hover:bg-gray-100">
              <td class="py-3 px-6 text-left whitespace-nowrap">
                <div class="flex items-center">
                  <div class="mr-2"></div>

                  <span class="font-medium"><%= user.registrationId %> </span>
                </div>
              </td>
              <td class="py-3 px-6 text-left">
                <div class="flex items-center">
                  <a
                    href="<%= user.submission.submissionLink  %> "
                    class="
                      hover:text-blue-800
                      font-medium
                      cursor-pointer
                      text-blue-400
                    "
                    target="blank"
                    ><%= user.submission.submissionLink %>
                  </a>
                </div>
              </td>
              <td class="py-3 px-6 text-center">
                <div class="flex items-center font-medium justify-center">
                  Week <%= user.submission.weekNo %>
                </div>
              </td>
              <td class="py-3 px-6 text-center">
                <% if (user.submission.approved == null) { %>
                <span
                  class="
                    bg-purple-200
                    font-medium
                    text-purple-600
                    py-1
                    px-3
                    rounded-full
                    text-xs
                  "
                  >Pending</span
                >
                <% } else if(user.submission.approved != null) {%> <%
                if(user.submission.approved == false){ %>
                <span
                  class="
                    bg-red-200
                    font-medium
                    text-red-600
                    py-1
                    px-3
                    rounded-full
                    text-xs
                  "
                  >Rejected</span
                >
                <% } else {%>
                <span
                  class="
                    bg-green-300
                    font-medium
                    text-green-600
                    py-1
                    px-3
                    rounded-full
                    text-xs
                  "
                  >Approved</span
                >
                <% } %> <% } %>
              </td>
              <td class="py-3 px-6 text-center">
                <div class="flex item-center justify-center">
                  <div x-data="{ open: false }">
                    <button
                      class="
                        mr-2
                        transform
                        hover:text-green-400
                        w-5
                        h-5
                        text-white
                        m-1
                        rounded-full
                        bg-green-400
                        hover:bg-gray-100 hover:scale-110
                      "
                      @click="open = true"
                    >
                      <i class="fas fa-check"></i>
                    </button>
                    <div
                      class="
                        absolute
                        top-0
                        left-0
                        flex
                        items-center
                        justify-center
                        w-full
                        h-full
                        z-10
                      "
                      style="background-color: rgba(0, 0, 0, 0.5)"
                      x-show="open"
                    >
                      <!-- A basic modal dialog with title, body and one button to close -->
                      <div
                        class="
                          h-auto
                          p-3
                          mx-2
                          text-left
                          z-20
                          bg-white
                          rounded
                          shadow-xl
                          md:max-w-xl md:p-6
                          lg:p-8
                          md:mx-0
                        "
                        @click.away="open = false"
                      >
                        <div
                          class="
                            mt-3
                            lg:-ml-1
                            text-center
                            justify-center
                            sm:mt-0 sm:ml-4 sm:text-left
                          "
                        >
                          <h3
                            class="text-lg font-medium leading-6 text-gray-900"
                          >
                            Accept Submission
                          </h3>

                          <div class="mt-2">
                            <p
                              class="
                                text-sm
                                leading-5
                                font-medium
                                text-gray-500
                              "
                            >
                              Give your reviews below regaring the submission
                            </p>
                            <label class="block">
                              <textarea
                                class="
                                  form-textarea
                                  mt-3
                                  block
                                  w-full
                                  rounded-md
                                  p-2
                                  border-2 border-green-200
                                  focus:outline-none
                                  focus:border-2
                                  focus:border-green-600
                                  resize-none
                                "
                                id="text-area"
                                rows="3"
                                placeholder="Enter your review."
                              ></textarea>
                            </label>
                          </div>
                        </div>

                        <!-- One big close button.  --->
                        <div class="mt-5 sm:mt-6 flex flex-row gap-2">
                          <span class="flex w-full rounded-md"> </span>

                          <span class="flex w-full rounded-md shadow-sm">
                            <button
                              @click="open = false"
                              class="
                                submit-btn
                                inline-flex
                                font-medium
                                justify-center
                                w-full
                                px-4
                                py-2
                                text-white
                                bg-green-500
                                rounded
                                hover:bg-green-600
                                
                              "
                              weekNo = "<%= user.submission.weekNo %>"
                              approved="true"
                              regdId = "<%= user.registrationId %>"
                              presentDomain = <%= selectedDomain%>
                            >
                              Submit
                            </button>
                          </span>
                          <span class="flex w-full rounded-md shadow-sm">
                            <button
                              @click="open = false"
                              class="
                                inline-flex
                                justify-center
                                w-full
                                px-4
                                py-2
                                text-white
                                bg-blue-500
                                rounded
                                hover:bg-blue-700
                              "
                            >
                              Cancel
                            </button>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div x-data="{ open: false }">
                    <button
                      class="
                        mr-2
                        transform
                        hover:text-red-400
                        w-5
                        h-5
                        text-white
                        m-1
                        rounded-full
                        bg-red-400
                        hover:bg-gray-100 hover:scale-110
                      "
                      @click="open = true"
                    >
                      <i class="fas fa-times"></i>
                    </button>
                    <div
                      class="
                        absolute
                        top-0
                        left-0
                        flex
                        items-center
                        justify-center
                        w-full
                        h-full
                      "
                      style="background-color: rgba(0, 0, 0, 0.5)"
                      x-show="open"
                    >
                      <!-- A basic modal dialog with title, body and one button to close -->
                      <div
                        class="
                          h-auto
                          p-4
                          mx-2
                          text-left
                          z-10
                          bg-white
                          rounded
                          shadow-xl
                          md:max-w-xl md:p-6
                          lg:p-8
                          md:mx-0
                        "
                        @click.away="open = false"
                      >
                        <div
                          class="
                            mt-3
                            lg:-ml-1
                            text-center
                            sm:mt-0 sm:ml-4 sm:text-left
                          "
                        >
                          <h3
                            class="text-lg font-medium leading-6 text-gray-900"
                          >
                            Reject Submission
                          </h3>

                          <div class="mt-2">
                            <p
                              class="
                                text-sm
                                leading-5
                                font-medium
                                text-gray-500
                              "
                            >
                              Give your reviews below regaring the submission
                            </p>
                            <label class="block">
                              <textarea
                                class="
                                  form-textarea
                                  mt-3
                                  block
                                  w-full
                                  rounded-md
                                  p-2
                                  border-2 border-red-200
                                  focus:outline-none
                                  focus:border-2
                                  focus:border-red-600
                                  resize-none
                                "
                                id="text-space"
                                rows="3"
                                placeholder="Enter your reviews."
                              ></textarea>
                            </label>
                          </div>
                        </div>

                        <!-- One big close button.  --->
                        <div class="mt-5 sm:mt-6 flex flex-row gap-2">
                          <span class="flex w-full rounded-md shadow-sm">
                          </span>
                          <span class="flex w-full rounded-md shadow-sm">
                            <button
                              @click="open = false"
                              class="
                                reject-btn
                                inline-flex
                                justify-center
                                w-full
                                px-4
                                py-2
                                text-white
                                bg-red-400
                                rounded
                                hover:bg-red-500
                              "
                              weekNo = "<%= user.submission.weekNo %>"

                              regdId = "<%= user.registrationId %>"
                              presentDomain = <%= selectedDomain%>
                              approved="false"
                            >
                              Submit
                            </button>
                          </span>
                          <span class="flex w-full rounded-md shadow-sm">
                            <button
                              @click="open = false"
                              class="
                                inline-flex
                                justify-center
                                w-full
                                px-4
                                py-2
                                text-white
                                bg-blue-500
                                rounded
                                hover:bg-blue-700
                              "
                            >
                              Cancel
                            </button>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<script>
  function redirectURL(value) {
    window.location.href =
      `http://localhost:3000/skills/mentor-dashboard` +
      `?domainId=` +
      `${value}`;
  }

</script>
<script src="/js/mentorsdashboard.js"></script>